<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Statistical Analysis</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/table1-1.0/table1_defaults.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="index.html">Welcome</a>
</li>
<li>
  <a href="report.html">Report</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Exploratory Analysis
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="methods.html">National Health Survey Data</a>
    </li>
    <li>
      <a href="test_storyboard.html">Exploratory Analysis II: BRFSS dashboard</a>
    </li>
    <li>
      <a href="ed_visit_file_prep.html">Flu-like Illness ED Visits: Dataset Prep</a>
    </li>
    <li>
      <a href="vax_locations_nyc.html">Flu Vaccine Locations in NYC</a>
    </li>
    <li>
      <a href="flu_like_visits_eda.html">Flu-like Illness ED Visits: Analysis</a>
    </li>
    <li>
      <a href="qual.html">Qualitative exploration</a>
    </li>
  </ul>
</li>
<li>
  <a href="stat.html">Statistical Analysis</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Bonus Stuff
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="extras.html">Team Members</a>
    </li>
    <li>
      <a href="resources.html">Resources</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://github.com/mggn/vaccine.github.io">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore"><center>
Statistical Analysis</h1>

</div>


<div id="overview" class="section level2">
<h2>Overview</h2>
<p>To learn more about what influences adults to obtain an influenza vaccine, we will conduct additional statistical analyses of the National Health Survey data set. We will be using the tidied data from our earlier <a href="methods.html">exploratory analysis</a>.</p>
</div>
<div id="univariate-analysis" class="section level2">
<h2>Univariate Analysis</h2>
<p>To begin, we would like to take a better look at the distribution of the data and important variables.</p>
<pre class="r"><code>flu_adult_df = 
  read_csv(&quot;./final_project_large_data/flu_adult_df.csv&quot;) %&gt;% 
  mutate(
    flu_shot = str_to_title(flu_shot),
    flu_shot = as.factor(flu_shot),
    race_eth = 
      case_when(
        nh_race == &quot;hispanic&quot;          ~ &quot;Hispanic&quot;,
        nh_race == &quot;NH AIAN&quot;           ~ &quot;Native or mixed race&quot;,
        nh_race == &quot;NH AIAN and other&quot; ~ &quot;Native or mixed race&quot;,
        nh_race == &quot;NH asian&quot;          ~ &quot;Asian&quot;,
        nh_race == &quot;NH black&quot;          ~ &quot;Black&quot;,
        nh_race == &quot;NH white&quot;          ~ &quot;White&quot;,
        nh_race == &quot;multiple races&quot;    ~ &quot;Native or mixed race&quot;
      ),
    last_dr_visit = 
      case_when(
        last_drvisit == &quot;10+ years&quot;            ~ &quot;5+ years&quot;,
        last_drvisit == &quot;within last 10 years&quot; ~ &quot;5+ years&quot;,
        last_drvisit == &quot;within last 5 years&quot;  ~ &quot;&lt;5 years&quot;,
        last_drvisit == &quot;within last 3 years&quot;  ~ &quot;&lt;5 years&quot;,
        last_drvisit == &quot;within last 2 years&quot;  ~ &quot;&lt;2 years&quot;,
        last_drvisit == &quot;within past year&quot;     ~ &quot;Within past year&quot;,
        last_drvisit == &quot;never&quot;                ~ &quot;5+ years&quot;
      ),
    education = 
      case_when(
        education == &quot;12th grade, no dipolma&quot; ~ &quot;Less than high school&quot;,
        education == &quot;Associate degree-aca&quot;   ~ &quot;Associate&#39;s degree&quot;,
        education == &quot;Associate degree-tech&quot;  ~ &quot;Associate&#39;s degree&quot;,
        education == &quot;Bachelor&#39;s degree&quot;      ~ &quot;Bachelor&#39;s degree&quot;,
        education == &quot;College, no degree&quot;     ~ &quot;Some college&quot;,
        education == &quot;Doctoral degree&quot;        ~ &quot;Advanced degree&quot;,
        education == &quot;GED&quot;                    ~ &quot;High school diploma/GED&quot;,
        education == &quot;Grades 1-11&quot;            ~ &quot;Less than high school&quot;,
        education == &quot;HS graduate&quot;            ~ &quot;High school diploma/GED&quot;,
        education == &quot;Master&#39;s degree&quot;        ~ &quot;Advanced degree&quot;,
        education == &quot;never attended&quot;         ~ &quot;Less than high school&quot;,
        education == &quot;Professional school&quot;    ~ &quot;Advanced degree&quot;
      ),
    health = str_to_title(health),
    health = as.factor(health),
    insurance = str_to_title(insurance),
    insurance = as.factor(insurance),
    usborn = str_to_title(usborn),
    usborn = as.factor(usborn),
    bmi = str_to_title(bmi),
    bmi = as.factor(bmi),
    race_eth = fct_infreq(race_eth),
    health = fct_relevel(health, &quot;Excellent&quot;, &quot;Very Good&quot;, &quot;Good&quot;, &quot;Fair&quot;, &quot;Poor&quot;),
    last_dr_visit = fct_relevel(last_dr_visit, &quot;Within past year&quot;, &quot;&lt;2 years&quot;,
                               &quot;&lt;5 years&quot;, &quot;5+ years&quot;),
    education = fct_relevel(education, &quot;Less than high school&quot;, 
                            &quot;High school diploma/GED&quot;, &quot;Some college&quot;,
                            &quot;Associate&#39;s degree&quot;, &quot;Bachelor&#39;s degree&quot;,
                            &quot;Advanced degree&quot;),
    usborn = fct_relevel(usborn, &quot;Yes&quot;, &quot;No&quot;),
    bmi = fct_relevel(bmi, &quot;Underweight&quot;, &quot;Healthy Weight&quot;, &quot;Overweight&quot;, &quot;Obese&quot;)
  ) 

label(flu_adult_df$flu_shot) = &quot;Flu Vaccine Received&quot;
label(flu_adult_df$age) = &quot;Age&quot;
label(flu_adult_df$sex) = &quot;Sex&quot;
label(flu_adult_df$race_eth) = &quot;Race/Ethnicity&quot;
label(flu_adult_df$health) = &quot;Health Status&quot;
label(flu_adult_df$insurance) = &quot;Insurance Coverage&quot;
label(flu_adult_df$bmi) = &quot;BMI&quot;
label(flu_adult_df$last_dr_visit) = &quot;Last Doctor Visit&quot;
label(flu_adult_df$education) = &quot;Education&quot;
label(flu_adult_df$usborn) = &quot;US-Born&quot;
units(flu_adult_df$age) = &quot;years&quot;
units(flu_adult_df$bmi) = &quot;kg/m^2&quot;

table1(~ age + sex + race_eth + health + insurance + bmi +
         last_dr_visit + education + usborn | flu_shot, 
       data = flu_adult_df,
       caption = &quot;Table 1: Distribution of demographic and health-related 
       covariates by vaccination status.&quot;)</code></pre>
<div class="Rtable1"><table class="Rtable1"><caption>Table 1: Distribution of demographic and health-related 
       covariates by vaccination status.</caption>

<thead>
<tr>
<th class='rowlabel firstrow lastrow'></th>
<th class='firstrow lastrow'><span class='stratlabel'>No<br><span class='stratn'>(N=15549)</span></span></th>
<th class='firstrow lastrow'><span class='stratlabel'>Yes<br><span class='stratn'>(N=16063)</span></span></th>
<th class='firstrow lastrow'><span class='stratlabel'>Overall<br><span class='stratn'>(N=31997)</span></span></th>
</tr>
</thead>
<tbody>
<tr>
<td class='rowlabel firstrow'><span class='varlabel'>Age<span class='varunits'> (years)</span></span></td>
<td class='firstrow'></td>
<td class='firstrow'></td>
<td class='firstrow'></td>
</tr>
<tr>
<td class='rowlabel'>Mean (SD)</td>
<td>47.1 (16.9)</td>
<td>56.9 (18.5)</td>
<td>52.1 (18.5)</td>
</tr>
<tr>
<td class='rowlabel lastrow'>Median [Min, Max]</td>
<td class='lastrow'>46.0 [18.0, 99.0]</td>
<td class='lastrow'>60.0 [18.0, 99.0]</td>
<td class='lastrow'>53.0 [18.0, 99.0]</td>
</tr>
<tr>
<td class='rowlabel firstrow'><span class='varlabel'>Sex</span></td>
<td class='firstrow'></td>
<td class='firstrow'></td>
<td class='firstrow'></td>
</tr>
<tr>
<td class='rowlabel'>Female</td>
<td>7821 (50.3%)</td>
<td>9225 (57.4%)</td>
<td>17261 (53.9%)</td>
</tr>
<tr>
<td class='rowlabel'>Male</td>
<td>7725 (49.7%)</td>
<td>6838 (42.6%)</td>
<td>14733 (46.0%)</td>
</tr>
<tr>
<td class='rowlabel lastrow'>Missing</td>
<td class='lastrow'>3 (0.0%)</td>
<td class='lastrow'>0 (0%)</td>
<td class='lastrow'>3 (0.0%)</td>
</tr>
<tr>
<td class='rowlabel firstrow'><span class='varlabel'>Race/Ethnicity</span></td>
<td class='firstrow'></td>
<td class='firstrow'></td>
<td class='firstrow'></td>
</tr>
<tr>
<td class='rowlabel'>White</td>
<td>9974 (64.1%)</td>
<td>11718 (73.0%)</td>
<td>21915 (68.5%)</td>
</tr>
<tr>
<td class='rowlabel'>Hispanic</td>
<td>2455 (15.8%)</td>
<td>1633 (10.2%)</td>
<td>4152 (13.0%)</td>
</tr>
<tr>
<td class='rowlabel'>Black</td>
<td>1978 (12.7%)</td>
<td>1440 (9.0%)</td>
<td>3483 (10.9%)</td>
</tr>
<tr>
<td class='rowlabel'>Asian</td>
<td>726 (4.7%)</td>
<td>901 (5.6%)</td>
<td>1648 (5.2%)</td>
</tr>
<tr>
<td class='rowlabel lastrow'>Native or mixed race</td>
<td class='lastrow'>416 (2.7%)</td>
<td class='lastrow'>371 (2.3%)</td>
<td class='lastrow'>799 (2.5%)</td>
</tr>
<tr>
<td class='rowlabel firstrow'><span class='varlabel'>Health Status</span></td>
<td class='firstrow'></td>
<td class='firstrow'></td>
<td class='firstrow'></td>
</tr>
<tr>
<td class='rowlabel'>Excellent</td>
<td>3887 (25.0%)</td>
<td>3285 (20.5%)</td>
<td>7258 (22.7%)</td>
</tr>
<tr>
<td class='rowlabel'>Very Good</td>
<td>5272 (33.9%)</td>
<td>5393 (33.6%)</td>
<td>10767 (33.7%)</td>
</tr>
<tr>
<td class='rowlabel'>Good</td>
<td>4243 (27.3%)</td>
<td>4539 (28.3%)</td>
<td>8893 (27.8%)</td>
</tr>
<tr>
<td class='rowlabel'>Fair</td>
<td>1659 (10.7%)</td>
<td>2073 (12.9%)</td>
<td>3783 (11.8%)</td>
</tr>
<tr>
<td class='rowlabel'>Poor</td>
<td>480 (3.1%)</td>
<td>768 (4.8%)</td>
<td>1274 (4.0%)</td>
</tr>
<tr>
<td class='rowlabel lastrow'>Missing</td>
<td class='lastrow'>8 (0.1%)</td>
<td class='lastrow'>5 (0.0%)</td>
<td class='lastrow'>22 (0.1%)</td>
</tr>
<tr>
<td class='rowlabel firstrow'><span class='varlabel'>Insurance Coverage</span></td>
<td class='firstrow'></td>
<td class='firstrow'></td>
<td class='firstrow'></td>
</tr>
<tr>
<td class='rowlabel'>Covered</td>
<td>13244 (85.2%)</td>
<td>15456 (96.2%)</td>
<td>29015 (90.7%)</td>
</tr>
<tr>
<td class='rowlabel'>Not Covered</td>
<td>2260 (14.5%)</td>
<td>584 (3.6%)</td>
<td>2887 (9.0%)</td>
</tr>
<tr>
<td class='rowlabel lastrow'>Missing</td>
<td class='lastrow'>45 (0.3%)</td>
<td class='lastrow'>23 (0.1%)</td>
<td class='lastrow'>95 (0.3%)</td>
</tr>
<tr>
<td class='rowlabel firstrow'><span class='varlabel'>BMI<span class='varunits'> (kg/m^2)</span></span></td>
<td class='firstrow'></td>
<td class='firstrow'></td>
<td class='firstrow'></td>
</tr>
<tr>
<td class='rowlabel'>Underweight</td>
<td>259 (1.7%)</td>
<td>249 (1.6%)</td>
<td>516 (1.6%)</td>
</tr>
<tr>
<td class='rowlabel'>Healthy Weight</td>
<td>4935 (31.7%)</td>
<td>4913 (30.6%)</td>
<td>9968 (31.2%)</td>
</tr>
<tr>
<td class='rowlabel'>Overweight</td>
<td>5164 (33.2%)</td>
<td>5378 (33.5%)</td>
<td>10649 (33.3%)</td>
</tr>
<tr>
<td class='rowlabel'>Obese</td>
<td>4778 (30.7%)</td>
<td>5127 (31.9%)</td>
<td>9997 (31.2%)</td>
</tr>
<tr>
<td class='rowlabel lastrow'>Missing</td>
<td class='lastrow'>413 (2.7%)</td>
<td class='lastrow'>396 (2.5%)</td>
<td class='lastrow'>867 (2.7%)</td>
</tr>
<tr>
<td class='rowlabel firstrow'><span class='varlabel'>Last Doctor Visit</span></td>
<td class='firstrow'></td>
<td class='firstrow'></td>
<td class='firstrow'></td>
</tr>
<tr>
<td class='rowlabel'>Within past year</td>
<td>12218 (78.6%)</td>
<td>15121 (94.1%)</td>
<td>27551 (86.1%)</td>
</tr>
<tr>
<td class='rowlabel'><2 years</td>
<td>1553 (10.0%)</td>
<td>594 (3.7%)</td>
<td>2162 (6.8%)</td>
</tr>
<tr>
<td class='rowlabel'><5 years</td>
<td>1085 (7.0%)</td>
<td>242 (1.5%)</td>
<td>1339 (4.2%)</td>
</tr>
<tr>
<td class='rowlabel'>5+ years</td>
<td>653 (4.2%)</td>
<td>89 (0.6%)</td>
<td>746 (2.3%)</td>
</tr>
<tr>
<td class='rowlabel lastrow'>Missing</td>
<td class='lastrow'>40 (0.3%)</td>
<td class='lastrow'>17 (0.1%)</td>
<td class='lastrow'>199 (0.6%)</td>
</tr>
<tr>
<td class='rowlabel firstrow'><span class='varlabel'>Education</span></td>
<td class='firstrow'></td>
<td class='firstrow'></td>
<td class='firstrow'></td>
</tr>
<tr>
<td class='rowlabel'>Less than high school</td>
<td>1538 (9.9%)</td>
<td>1372 (8.5%)</td>
<td>2954 (9.2%)</td>
</tr>
<tr>
<td class='rowlabel'>High school diploma/GED</td>
<td>4406 (28.3%)</td>
<td>3674 (22.9%)</td>
<td>8201 (25.6%)</td>
</tr>
<tr>
<td class='rowlabel'>Some college</td>
<td>2709 (17.4%)</td>
<td>2450 (15.3%)</td>
<td>5216 (16.3%)</td>
</tr>
<tr>
<td class='rowlabel'>Associate's degree</td>
<td>2066 (13.3%)</td>
<td>2065 (12.9%)</td>
<td>4170 (13.0%)</td>
</tr>
<tr>
<td class='rowlabel'>Bachelor's degree</td>
<td>3140 (20.2%)</td>
<td>3728 (23.2%)</td>
<td>6952 (21.7%)</td>
</tr>
<tr>
<td class='rowlabel'>Advanced degree</td>
<td>1604 (10.3%)</td>
<td>2697 (16.8%)</td>
<td>4325 (13.5%)</td>
</tr>
<tr>
<td class='rowlabel lastrow'>Missing</td>
<td class='lastrow'>86 (0.6%)</td>
<td class='lastrow'>77 (0.5%)</td>
<td class='lastrow'>179 (0.6%)</td>
</tr>
<tr>
<td class='rowlabel firstrow'><span class='varlabel'>US-Born</span></td>
<td class='firstrow'></td>
<td class='firstrow'></td>
<td class='firstrow'></td>
</tr>
<tr>
<td class='rowlabel'>Yes</td>
<td>12661 (81.4%)</td>
<td>13611 (84.7%)</td>
<td>26328 (82.3%)</td>
</tr>
<tr>
<td class='rowlabel'>No</td>
<td>2630 (16.9%)</td>
<td>2214 (13.8%)</td>
<td>4863 (15.2%)</td>
</tr>
<tr>
<td class='rowlabel lastrow'>Missing</td>
<td class='lastrow'>258 (1.7%)</td>
<td class='lastrow'>238 (1.5%)</td>
<td class='lastrow'>806 (2.5%)</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="logistic-regression-modeling" class="section level2">
<h2>Logistic Regression Modeling</h2>
<p>To further investigate the data, we will run a logistic regression to look into what variables significantly influence the odds that an individual will obtain the flu vaccine. We believe that health insurance coverage is an important predictor of vaccination behavior, so we will begin with that as a main effect and add other explanatory variables from there.</p>
<pre class="r"><code>flu_adult_model = 
  flu_adult_df %&gt;% 
  mutate(
    flu_shot = case_when(
      flu_shot == &quot;Yes&quot; ~ 1,
      flu_shot == &quot;No&quot;  ~ 0
    )
  ) 

logreg_crude = 
  glm(flu_shot ~ insurance, data = flu_adult_model, family = &quot;binomial&quot;) 

lr_crude_results = 
  logreg_crude %&gt;% 
  broom::tidy() %&gt;% 
  janitor::clean_names() %&gt;% 
  mutate(
    term = str_replace(term, &quot;insurance&quot;, &quot;Insurance Coverage: &quot;)
  ) %&gt;% 
  dplyr::select(-c(std_error, statistic))

lr_crude_results %&gt;% knitr::kable(digits = 4)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">p_value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">0.1545</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Insurance Coverage: Not Covered</td>
<td align="right">-1.5077</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>We can see from our crude, main effects model that adults who are not covered by health insurance have 0.22 times the odds of getting a flu vaccine compared to individuals who do have health insurance, on average. Our coefficient for the insurance term is significant in this model at a significance level of <span class="math inline">\(\alpha\)</span> = 0.05.</p>
<p>To build out our model, we will include effects of patient sex, education level, race/ethnicity, health status, BMI category, recency of last doctor visit, and whether the patient is a native citizen or an immigrant. Our full parametric model is as follows:</p>
<pre class="r"><code>logreg_full = 
  glm(flu_shot ~ insurance + sex + education + race_eth + health + bmi + 
                  last_dr_visit + usborn, 
                 data = flu_adult_model, family = &quot;binomial&quot;) 

lr_full_results = 
  logreg_full %&gt;% 
  broom::tidy() %&gt;% 
  janitor::clean_names() %&gt;% 
  mutate(
    term = str_replace(term, &quot;insurance&quot;, &quot;Insurance Coverage: &quot;),
    term = str_replace(term, &quot;education&quot;, &quot;Education: &quot;),
    term = str_replace(term, &quot;race_eth&quot;, &quot;Race/Ethnicity: &quot;),
    term = str_replace(term, &quot;health&quot;, &quot;Health: &quot;),
    term = str_replace(term, &quot;bmi&quot;, &quot;BMI: &quot;),
    term = str_replace(term, &quot;last_dr_visit&quot;, &quot;Last Doctor Visit: &quot;),
    term = str_replace(term, &quot;usborn&quot;, &quot;US Born: &quot;),
    term = str_replace(term, &quot;sex&quot;, &quot;Sex: &quot;)
  ) %&gt;% 
  dplyr::select(-c(std_error, statistic))

lr_full_results %&gt;% knitr::kable(digits = 4)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">p_value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">0.0676</td>
<td align="right">0.5314</td>
</tr>
<tr class="even">
<td align="left">Insurance Coverage: Not Covered</td>
<td align="right">-1.0658</td>
<td align="right">0.0000</td>
</tr>
<tr class="odd">
<td align="left">Sex: Male</td>
<td align="right">-0.2109</td>
<td align="right">0.0000</td>
</tr>
<tr class="even">
<td align="left">Education: High school diploma/GED</td>
<td align="right">-0.1649</td>
<td align="right">0.0007</td>
</tr>
<tr class="odd">
<td align="left">Education: Some college</td>
<td align="right">-0.1259</td>
<td align="right">0.0161</td>
</tr>
<tr class="even">
<td align="left">Education: Associate’s degree</td>
<td align="right">-0.0477</td>
<td align="right">0.3808</td>
</tr>
<tr class="odd">
<td align="left">Education: Bachelor’s degree</td>
<td align="right">0.1327</td>
<td align="right">0.0094</td>
</tr>
<tr class="even">
<td align="left">Education: Advanced degree</td>
<td align="right">0.4435</td>
<td align="right">0.0000</td>
</tr>
<tr class="odd">
<td align="left">Race/Ethnicity: Hispanic</td>
<td align="right">-0.3318</td>
<td align="right">0.0000</td>
</tr>
<tr class="even">
<td align="left">Race/Ethnicity: Black</td>
<td align="right">-0.5146</td>
<td align="right">0.0000</td>
</tr>
<tr class="odd">
<td align="left">Race/Ethnicity: Asian</td>
<td align="right">0.0929</td>
<td align="right">0.1478</td>
</tr>
<tr class="even">
<td align="left">Race/Ethnicity: Native or mixed race</td>
<td align="right">-0.1722</td>
<td align="right">0.0278</td>
</tr>
<tr class="odd">
<td align="left">Health: Very Good</td>
<td align="right">0.1490</td>
<td align="right">0.0000</td>
</tr>
<tr class="even">
<td align="left">Health: Good</td>
<td align="right">0.2715</td>
<td align="right">0.0000</td>
</tr>
<tr class="odd">
<td align="left">Health: Fair</td>
<td align="right">0.4281</td>
<td align="right">0.0000</td>
</tr>
<tr class="even">
<td align="left">Health: Poor</td>
<td align="right">0.5994</td>
<td align="right">0.0000</td>
</tr>
<tr class="odd">
<td align="left">BMI: Healthy Weight</td>
<td align="right">0.1211</td>
<td align="right">0.2154</td>
</tr>
<tr class="even">
<td align="left">BMI: Overweight</td>
<td align="right">0.2290</td>
<td align="right">0.0193</td>
</tr>
<tr class="odd">
<td align="left">BMI: Obese</td>
<td align="right">0.2130</td>
<td align="right">0.0299</td>
</tr>
<tr class="even">
<td align="left">Last Doctor Visit: &lt;2 years</td>
<td align="right">-1.0063</td>
<td align="right">0.0000</td>
</tr>
<tr class="odd">
<td align="left">Last Doctor Visit: &lt;5 years</td>
<td align="right">-1.4030</td>
<td align="right">0.0000</td>
</tr>
<tr class="even">
<td align="left">Last Doctor Visit: 5+ years</td>
<td align="right">-1.8157</td>
<td align="right">0.0000</td>
</tr>
<tr class="odd">
<td align="left">US Born: No</td>
<td align="right">-0.0632</td>
<td align="right">0.1310</td>
</tr>
</tbody>
</table>
<p>In our full adjusted model, we see that adults who are not covered by health insurance have 0.34 times the odds of getting a flu vaccine compared to individuals who do have health insurance, on average. Our coefficient for the insurance term is significant in this model at a significance level of <span class="math inline">\(\alpha\)</span> = 0.05. Regarding the other variables in our model, all variables have statistically significant levels with the exception of BMI and US-born status. Therefore, we will remove those variables from the model.</p>
<pre class="r"><code>logreg_adj =
  glm(flu_shot ~ insurance + sex + education + race_eth + health + last_dr_visit, 
                 data = flu_adult_model, family = &quot;binomial&quot;)

lr_adj_results = 
  logreg_adj %&gt;% 
  broom::tidy() %&gt;% 
  janitor::clean_names() %&gt;% 
  mutate(
    term = str_replace(term, &quot;insurance&quot;, &quot;Insurance Coverage: &quot;),
    term = str_replace(term, &quot;education&quot;, &quot;Education: &quot;),
    term = str_replace(term, &quot;race_eth&quot;, &quot;Race/Ethnicity: &quot;),
    term = str_replace(term, &quot;health&quot;, &quot;Health: &quot;),
    term = str_replace(term, &quot;last_dr_visit&quot;, &quot;Last Doctor Visit: &quot;),
  ) %&gt;% 
  dplyr::select(-c(std_error, statistic))

lr_adj_results %&gt;% knitr::kable(digits = 4)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">p_value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">0.2210</td>
<td align="right">0.0000</td>
</tr>
<tr class="even">
<td align="left">Insurance Coverage: Not Covered</td>
<td align="right">-1.0758</td>
<td align="right">0.0000</td>
</tr>
<tr class="odd">
<td align="left">sexMale</td>
<td align="right">-0.1928</td>
<td align="right">0.0000</td>
</tr>
<tr class="even">
<td align="left">Education: High school diploma/GED</td>
<td align="right">-0.1656</td>
<td align="right">0.0005</td>
</tr>
<tr class="odd">
<td align="left">Education: Some college</td>
<td align="right">-0.1195</td>
<td align="right">0.0185</td>
</tr>
<tr class="even">
<td align="left">Education: Associate’s degree</td>
<td align="right">-0.0421</td>
<td align="right">0.4257</td>
</tr>
<tr class="odd">
<td align="left">Education: Bachelor’s degree</td>
<td align="right">0.1290</td>
<td align="right">0.0094</td>
</tr>
<tr class="even">
<td align="left">Education: Advanced degree</td>
<td align="right">0.4380</td>
<td align="right">0.0000</td>
</tr>
<tr class="odd">
<td align="left">Race/Ethnicity: Hispanic</td>
<td align="right">-0.3306</td>
<td align="right">0.0000</td>
</tr>
<tr class="even">
<td align="left">Race/Ethnicity: Black</td>
<td align="right">-0.4959</td>
<td align="right">0.0000</td>
</tr>
<tr class="odd">
<td align="left">Race/Ethnicity: Asian</td>
<td align="right">0.0125</td>
<td align="right">0.8198</td>
</tr>
<tr class="even">
<td align="left">Race/Ethnicity: Native or mixed race</td>
<td align="right">-0.1759</td>
<td align="right">0.0223</td>
</tr>
<tr class="odd">
<td align="left">Health: Very Good</td>
<td align="right">0.1643</td>
<td align="right">0.0000</td>
</tr>
<tr class="even">
<td align="left">Health: Good</td>
<td align="right">0.2859</td>
<td align="right">0.0000</td>
</tr>
<tr class="odd">
<td align="left">Health: Fair</td>
<td align="right">0.4477</td>
<td align="right">0.0000</td>
</tr>
<tr class="even">
<td align="left">Health: Poor</td>
<td align="right">0.6063</td>
<td align="right">0.0000</td>
</tr>
<tr class="odd">
<td align="left">Last Doctor Visit: &lt;2 years</td>
<td align="right">-0.9921</td>
<td align="right">0.0000</td>
</tr>
<tr class="even">
<td align="left">Last Doctor Visit: &lt;5 years</td>
<td align="right">-1.4162</td>
<td align="right">0.0000</td>
</tr>
<tr class="odd">
<td align="left">Last Doctor Visit: 5+ years</td>
<td align="right">-1.7818</td>
<td align="right">0.0000</td>
</tr>
</tbody>
</table>
<p>In our parsimonious adjusted model, we see that adults who are not covered by health insurance have 0.34 times the odds of getting a flu vaccine compared to individuals who do have health insurance, on average. Our coefficient for the insurance term is significant in this model at a significance level of <span class="math inline">\(\alpha\)</span> = 0.05. All of the other variables in the model are significant, so we are satisfied with this model.</p>
</div>
<div id="testing-model-fit" class="section level2">
<h2>Testing Model Fit</h2>
<p>To compare the models, we will evaluate the AIC, Akaike’s Information Criterion, for each model. The model that has a smaller AIC is a better fit for the data.</p>
<pre class="r"><code>aic_test = 
  tibble(
    &quot;Crude&quot; = AIC(logreg_crude),
    &quot;Full&quot; = AIC(logreg_full),
    &quot;Parsimonious&quot; = AIC(logreg_adj)
  ) %&gt;% 
  pivot_longer(
    everything(),
    names_to = &quot;Model&quot;,
    values_to = &quot;AIC&quot;
  )

aic_test %&gt;% knitr::kable()</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">Model</th>
<th align="right">AIC</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Crude</td>
<td align="right">42507.92</td>
</tr>
<tr class="even">
<td align="left">Full</td>
<td align="right">38726.96</td>
</tr>
<tr class="odd">
<td align="left">Parsimonious</td>
<td align="right">40336.84</td>
</tr>
</tbody>
</table>
<p>As we can see, the full model has a smaller AIC than the crude and final model, meaning that it is a better fit for the data. However, because we are looking for the most parsimonious model rather than the most saturated model with the greatest fit for the data, we will select the third model as our final adjusted model.</p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
